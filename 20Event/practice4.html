<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
    </head>
    <body>
        <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
        <button id="fade-btn">淡出</button>
        
        <script>
            var fadeObj = document.getElementById("fade-obj");
            var fadeBtn = document.getElementById("fade-btn");
            var opacity = 1;
            var id;
            
            function fadeAni() {
                //动画核心：透明度变化
                if (con) {
                    opacity += 0.005;
                } else {
                    opacity -= 0.005;
                }
                fadeBtn.disabled = true;
                fadeObj.style.opacity = opacity;
                
                //到达临界点时，停止计时，转换按钮状态
                if (opacity <= 0 || opacity >= 1) {
                    clearInterval(id);
                    con = !con;
                    fadeBtn.disabled = false;
                }
                
                //改变文字内容
                if (opacity <= 0) {
                    fadeBtn.innerHTML = "淡入";
                } else if (opacity >= 1) {
                    fadeBtn.innerHTML = "淡出";
                }
            }
            
            //事件处理
            fadeBtn.onclick = function() {
                id = setInterval(fadeAni,10);
            }
            
            /*
            var id1,id2;
            function fadeOut() {
                fadeObj.style.opacity = opacity;
                opacity -= 0.005;
                fadeBtn.disabled = true;
                if (opacity <= 0) {
                    opacity = 0;
                    fadeBtn.disabled = false;
                }
            }
            
            function fadeIn() {
                fadeObj.style.opacity = opacity;
                opacity += 0.005;
                fadeBtn.disabled = true;
                if (opacity >= 1) {
                    opacity = 1;
                    fadeBtn.disabled = false;
                }
            }
            
            fadeBtn.onclick = function() {
                if (fadeBtn.innerHTML === "淡出") {
                    fadeBtn.innerHTML = "淡入";
                    clearInterval(id2);
                    id1 = setInterval(fadeOut,10);
                    } else if (fadeBtn.innerHTML === "淡入") {
                    fadeBtn.innerHTML = "淡出";
                    clearInterval(id1);
                    id2 = setInterval(fadeIn,10);
                }
            }*/
        </script>
    </body>
</html>
